<!DOCTYPE html>
<html>

<head>
    <title>Word Circle</title>
</head>

<body style="background-color: black;">
    <div align="center">
        <input type="text" id="wordInput" placeholder="Enter a word" onkeypress="checkKey(event)">
    </div>
    <main class="yang"></main>
    <div id="circles"></div>
</body>
<style>
    body {
        overflow: hidden;
    }

    input {
        background-color: transparent;
        border: none;
        border: 1px solid #aaa;
        padding: 10px;
        font-size: 1.3rem;
        color: white;
        border-radius: 16px;
    }

    main p {
        display: inline-block;
        vertical-align: middle;
        padding: 10px;
        margin: 10px;
        color: white;
        border-radius: 10px;
    }
</style>
<script>
    let words = {};
    const hexToRgbA = (hex) => {
        let c;
        if (/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)) {
            c = hex.substring(1).split('');
            if (c.length == 3) {
                c = [c[0], c[0], c[1], c[1], c[2], c[2]];
            }
            c = '0x' + c.join('');
            return 'rgba(' + [(c >> 16) & 255, (c >> 8) & 255, c & 255].join(',') + ',0.2)';
        }
        throw new Error('Bad Hex');
    }

    function checkKey(event) {
        if (event.key === "Enter") {
            let wordInput = document.getElementById("wordInput");
            let word = wordInput.value;
            wordInput.value = "";

            let diameter = 5;
            if (words[word]) {
                diameter = words[word].diameter + 1;
                const c = document.getElementById(word);
                c.style.width = diameter + "px";
                c.style.height = diameter + "px";
            } else {
                const aa = document.getElementsByTagName("main")[0];
                const p = document.createElement("p");
                let color = getRandomColor();
                console.log(color)
                p.style.backgroundColor = hexToRgbA(color);
                console.log(aa)
                p.innerHTML = word;
                aa.appendChild(p);

                let x = Math.random() * (window.innerWidth - diameter);
                let y = Math.random() * (window.innerHeight - diameter);

                let circle = document.createElement("div");
                circle.setAttribute("id", word);
                circle.style.backgroundColor = color;
                circle.style.width = diameter + "px";
                circle.style.height = diameter + "px";
                circle.style.borderRadius = "50%";
                circle.style.position = "absolute";
                circle.style.left = x + "px";
                circle.style.top = y + "px";

                let xSpeed = (Math.random() - 0.5) * 5;
                let ySpeed = (Math.random() - 0.5) * 5;

                circle.onmouseover = () => {
                    circle.style.cursor = "pointer";
                };

                circle.onmouseout = () => {
                    circle.style.cursor = "default";
                };

                circle.onclick = () => {
                    circle.parentNode.removeChild(circle);
                };

                document.getElementById("circles").appendChild(circle);
                moveCircle(circle, xSpeed, ySpeed);
            }
            words[word] = {
                diameter: diameter
            };
        }
    }

    function moveCircle(circle, xSpeed, ySpeed) {
        let x = parseInt(circle.style.left);
        let y = parseInt(circle.style.top);

        x += xSpeed;
        y += ySpeed;

        if (x > window.innerWidth - parseInt(circle.style.width) || x < 0) {
            xSpeed = -xSpeed;
        }
        if (y > window.innerHeight - parseInt(circle.style.height) || y < 0) {
            ySpeed = -ySpeed;
        }

        circle.style.left = x + "px";
        circle.style.top = y + "px";
        setTimeout(() => moveCircle(circle, xSpeed, ySpeed), 50);
    }

    function getRandomColor() {
        let letters = "0123456789ABCDEF";
        let color = "#";
        for (let i = 0; i < 6; i++) {
            color += letters[Math.floor(Math.random() * 16)];
        }
        return color;
    }
</script>

</html>